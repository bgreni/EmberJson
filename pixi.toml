[workspace]
authors = ["Brian Grenier <grenierb96@gmail.com>"]
channels = ["conda-forge", "https://conda.modular.com/max-nightly/"]
preview = ["pixi-build"]
description = "A json library for Mojo"
name = "emberjson"
platforms = ["osx-arm64", "linux-aarch64", "linux-64"]
version = "0.3.1"
license = "MIT"
license-file = "LICENSE"
homepage = "https://github.com/bgreni/EmberJson"
repository = "https://github.com/bgreni/EmberJson"

[tasks]
build = { cmd = "mojo package emberjson -o emberjson.mojopkg" }
format = { cmd = "mojo format -l 80 ." }
test = { cmd = "python run_tests.py" }
build_bench = "mojo build bench.mojo"
bench = { cmd = "./bench && rm bench", depends-on=["build_bench"] }
bench_compare = { cmd = "./bench --print-relative && rm bench", depends-on=["build_bench"] }
bench_write_results = { cmd = "./bench --overwrite && rm bench", depends-on=["build_bench"] }
update_and_build = { cmd = "pixi update && pixi run test && pixi run build" }
precommit = { depends-on = ["format", "test", "test_python_compat", "fuzz"] }
update_and_test = "pixi update && pixi run test && pixi run bench_compare"
test_python_compat = "python python_compat.py"
fuzz = "mojo -D ASSERT=all fuzz.mojo"
gen_jsonl = "mojo -D ASSERT=all -D GEN_JSONL fuzz.mojo"

[dependencies]
mojo = ">=0.26.2.0.dev2026020205,<0.27"


[package]
name = "emberjson"
version = "0.3.1"

[package.build]
backend = { name = "pixi-build-mojo", version = "0.1.*" }

[package.host-dependencies]
mojo-compiler = ">=0.26.2.0.dev2026020205,<0.27"

[package.build-dependencies]
mojo-compiler = ">=0.26.2.0.dev2026020205,<0.27"

[package.run-dependencies]
mojo-compiler = ">=0.26.2.0.dev2026020205,<0.27"

